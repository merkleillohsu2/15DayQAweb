<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>活動條款得獎公告</title>
  <link rel="stylesheet" href="/stylesheets/prize-info.css">
  <script src="/scripts/common.js"></script>
</head>
<body>
  <div class="container">
    <div class="tabs">
      <div id="winner-list-tab" class="tab active" onclick="showTabContent('winner-list')">得獎公告</div>
      <div id="important-info-tab" class="tab" onclick="showTabContent('important-info')">活動條款</div>
    </div>
    

    <div id="winner-list" class="tab-content active">
      <h2>得獎公告</h2>
        <!-- 得獎資料將通過 JavaScript 動態插入 -->
    <p>正在加載得獎名單...</p>

    </div>
    <div id="important-info" class="tab-content ">
      <div id="important-info-conent">
        <h2>指定日馬上抽</h2>
        <ol>
          <li>
            <strong>抽獎資格：</strong>
            <ul>
              <li>本活動僅限通路夥伴參加。一個員工ID在每個指定日期僅能參加一次。</li>
            </ul>
          </li>
          <li>
            <strong>抽獎機制 & 獎品類型：</strong>
            <ul>
              <li>系統將於三個指定日期 (X月X日，X月X日，X月X日)，針對完成當日任務的通路夥伴進行抽獎。</li>
              <li>每日抽出價值新台幣300元一卡通的獎項，每日中獎僅限一次，三次抽獎最多抽出900名得獎名額。</li>
            </ul>
          </li>
          <li>
            <strong>得獎者名單公布：</strong>
            <ul>
              <li>得獎者名單預計將於隔天下午三點於神隊友公告。</li>
            </ul>
          </li>
          <li>
            <strong>獎品發放方式：</strong>
            <ul>
              <li>菲利普莫里斯專員將到店舖發放獎勵給得獎者簽收。</li>
              <li>宜花東、外島或管制區域店舖將寄送簽收單並附郵資信封，需回填後寄回指定地址，確認報稅資訊後以雙掛號寄發新台幣300元一卡通至店舖。</li>
            </ul>
          </li>
        </ol>

        <h2>天天賺獎勵金 + 全勤加碼獎勵金</h2>
        <ol>
          <li>
            <strong>參加資格：</strong>
            <ul>
              <li>本活動僅限通路夥伴參加。一個員工ID僅能參加一次。</li>
            </ul>
          </li>
          <li>
            <strong>獎勵機制 & 獎品類型：</strong>
            <ul>
              <li>每日登入並完成當天任務即得價值新台幣5元LINE POINT，15天活動最高可獲得75元LINE POINT。</li>
              <li>連續15天完成任務可額外獲得價值新台幣25元LINE POINT好禮即享券。</li>
            </ul>
          </li>
          <li>
            <strong>獎勵發放方式：</strong>
            <ul>
              <li>菲利普莫里斯將透過Edenred系統發放，LINE POINT兌換期限自發行日起算至三個月底，有效期限為最後一次獲得點數當天起算180天內，逾期失效不予補償。</li>
            </ul>
          </li>
        </ol>

        <h2>第一階段問卷 (活動期間：X月X日 至 X月X日)</h2>
        <ol>
          <li>
            <strong>參加資格：</strong>
            <ul>
              <li>本活動僅限通路夥伴參加。一個員工ID僅能參加一次。</li>
            </ul>
          </li>
          <li>
            <strong>獎勵機制 & 獎品類型：</strong>
            <ul>
              <li>參與並完成第一階段問卷，並於X月X日期間完成「IQOS ILUMA加熱啟動」活動任務，即得價值新台幣10元LINE POINT好禮即享券。</li>
              <li>LINE POINT可於「我的任務獎勵金」頁面中查詢。</li>
            </ul>
          </li>
          <li>
            <strong>獎勵發放方式：</strong>
            <ul>
              <li>菲利普莫里斯將透過Edenred系統發放，兌換期限為自發行日起至三個月底，有效期限為180天內，逾期失效不予補償。</li>
            </ul>
          </li>
        </ol>

        <h2>第二階段問卷 (活動期間：X月X日 至 X月X日)</h2>
        <ol>
          <li>
            <strong>參加資格：</strong>
            <ul>
              <li>本活動僅限通路夥伴參加。一個員工ID僅能參加一次。</li>
            </ul>
          </li>
          <li>
            <strong>抽獎機制 & 獎品類型：</strong>
            <ul>
              <li>完成第二階段問卷後參加抽獎 (抽獎日為X月X日)，抽出價值新台幣300元一卡通50名，員工ID中獎僅限一次。</li>
              <li>若抽獎結束後仍有剩餘獎項，將不進行補抽。</li>
            </ul>
          </li>
          <li>
            <strong>得獎者名單公布：</strong>
            <ul>
              <li>得獎者名單將於抽獎隔天下午三點公布於神隊友公告。</li>
            </ul>
          </li>
          <li>
            <strong>獎品發放方式：</strong>
            <ul>
              <li>菲利普莫里斯專員到店舖發放獎品。</li>
              <li>宜花東或管制區域店舖將以郵寄方式處理，並寄送到指定地址，完成流程後以雙掛號寄發至店舖。</li>
            </ul>
          </li>
        </ol>

        <h2>所得稅申報說明</h2>
        <ul>
          <li>若獎項累計超過價值新台幣1,000元，得獎者需提供身份證影本並依稅法申報。</li>
          <li>若得獎者非境內居住，需預繳20%稅金方可領取獎項。</li>
          <li>若無法配合申報流程，視同自願放棄中獎資格，獎項不再補發。</li>
        </ul>

        <h2>活動權利</h2>
        <ul>
          <li>菲利普莫里斯保留隨時修改、取消或暫停活動的權利。</li>
          <li>參加活動需為通路夥伴，若不符資格或仿冒行為，除取消獎金外，應自負法律責任。</li>
          <li>獎勵不可折現、變更其他贈品或轉讓他人，若遇不可抗力因素，菲利普莫里斯保留更換等值贈品的權利。</li>
        </ul>
      </div>
    </div>
  </div>
  <script>
    function showTabContent(tabId) {
      var tabs = document.querySelectorAll('.tab');
      var contents = document.querySelectorAll('.tab-content');

      tabs.forEach(tab => tab.classList.remove('active'));
      contents.forEach(content => content.classList.remove('active'));

      document.getElementById(tabId).classList.add('active');
      document.querySelector(`.tab[onclick="showTabContent('${tabId}')"]`).classList.add('active');
    }
   
    async function fetchAllPrizes() {
      try {
        const response = await fetch('/prizes/all'); // 調用後端 API
        const data = await response.json();
  
        if (response.ok) {
          // 動態生成 HTML 內容
          const resultsContainer = document.getElementById('winner-list');
          const prizesByDate = data.prizesByDate;
  
          resultsContainer.innerHTML = Object.keys(prizesByDate).map(date => `
            <div>
              <h3>${date} 加碼抽$300 共 ${prizesByDate[date].length} 名</h3>
              <ul>
                ${prizesByDate[date].map(winner => `
                  <li>${winner.UserName} - ${winner.PhoneNumber}</li>
                `).join('')}
              </ul>
            </div>
            <hr>
          `).join('');
        } else {
          document.getElementById('winner-list').innerHTML = `<p>${data.message}</p>`;
        }
      } catch (error) {
        console.error('Error fetching prizes:', error);
        document.getElementById('winner-list').innerHTML = '<p>加載失敗，請稍後重試。</p>';
      }
    }
   // 初始展示第一個tab
   document.addEventListener('DOMContentLoaded', function () {
    showTabContent('winner-list');
  });
    // 初次調用 API 加載得獎公告
    fetchAllPrizes();
  
  </script>
</body>

</html>