<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>活動條款得獎公告</title>
  <link rel="stylesheet" href="/stylesheets/prize-info.css">
  <script src="/scripts/common.js"></script>
</head>
<body>
  <div class="container">
    <div class="tabs">
      <div id="winner-list-tab" class="tab active" onclick="showTabContent('winner-list')">得獎公告</div>
      <div id="important-info-tab" class="tab" onclick="showTabContent('important-info')">活動條款</div>
    </div>
    

    <div id="winner-list" class="tab-content active">
      <h2>得獎公告</h2>
        <!-- 得獎資料將通過 JavaScript 動態插入 -->
    <p>正在加載得獎名單...</p>

    </div>
    <div id="important-info" class="tab-content ">
      <div id="important-info-conent">
        <h2>指定日馬上抽</h2>
        <ol>
          <li>
            <strong>抽獎資格：</strong>
            <ul>
              <li>本活動僅限年滿20歲的通路夥伴參加。一個員工ID在每個指定日期僅能參加一次。</li>
            </ul>
          </li>
          <li>
            <strong>抽獎機制 & 獎品類型：</strong>
            <ul>
              <li>系統將於三個指定日期(X月X日， X月X日，X月X日)，針對完成當日任務的年滿20歲的通路夥伴進行抽獎，每日抽出價值新台幣300元一卡通的獎項，每日中獎僅限一次，三次抽獎最多抽出900名得獎名額</li>
            </ul>
          </li>
          <li>
            <strong>得獎者名單公布：</strong>
            <ul>
              <li>得獎者名單預計將於隔天下午三點於神隊友公告。</li>
            </ul>
          </li>
          <li>
            <strong>獎品發放方式：</strong>
            <ul>
              <li>菲利普莫里斯專員將到店舖發放獎勵給得獎者簽收。</li>
              <li>針對宜花東、外島或處於管制出入區域的店舖等，菲利普莫里斯將寄送簽收單並附上已包含郵資與回寄之資訊的信封到得獎者所在店舖，得獎者需於指定日期內回填後並寄到指定地址，待菲利普莫里斯確認報稅資訊正確之後，將以雙掛號寄發新台幣300元一卡通至店舖給予得獎者。</li>
            </ul>
          </li>
        </ol>
        <h2>天天賺獎勵金 + 全勤加碼獎勵金</h2>
        <ol>
          <li>
            <strong>參加資格：</strong>
            <ul>
              <li>本活動僅限年滿20歲的通路夥伴參加。一個員工ID僅能參加一次。</li>
            </ul>
          </li>
          <li>
            <strong>獎勵機制 & 獎品類型：</strong>
            <ul>
              <li>每日登入並完成當天任務即得價值新台幣5元LINE POINT，15天活動最高可獲得價值新台幣75元LINE POINT好禮即享券。</li>
              <li>連續15天登入神隊友並完成每日任務，可額外獲得價值新台幣25元LINE POINT好禮即享券。</li>
            </ul>
          </li>
          <li>
            <strong>獎勵發放方式：</strong>
            <ul>
              <li>菲利普莫里斯將透過Edenred系統進行發放，發放的LINE PIONT好禮即享券，兌換期間為自發行日起算至3個月底，兌換後的LINE POINTS有效期限為最後一次獲得點數當天起算180天內，一旦超過有效期限，您所持有的點數將會全數失效，逾期失效不予補償。</li>
            </ul>
          </li>
        </ol>

        <h2>第一階段問卷 (活動期間：X月X日 至 X月X日)</h2>
        <ol>
          <li>
            <strong>參加資格：</strong>
            <ul>
              <li>本活動僅限年滿20歲的通路夥伴參加。一個員工ID僅能參加一次。</li>
            </ul>
          </li>
          <li>
            <strong>獎勵機制 & 獎品類型：</strong>
            <ul>
              <li>參與並完成第一階段問券，並於X月X日 至 X月X日期間完成至少一次「IQOS ILUMA加熱啟動」活動任務，即得價值新台幣10元LINE POINT好禮即享券。</li>
              <li>新台幣10元LINE POINT好禮即享券將併入「IQOS ILUMA加熱啟動」活動中，並可於「我的任務獎勵金」頁面中查詢。</li>
            </ul>
          </li>
          <li>
            <strong>獎勵發放方式：</strong>
            <ul>
              <li>菲利普莫里斯將透過Edenred系統進行發放，發放的LINE PIONT好禮即享券，兌換期間為自發行日起算至3個月底，兌換後的LINE POINTS有效期限為最後一次獲得點數當天起算180天內，一旦超過有效期限，您所持有的點數將會全數失效，逾期失效不予補償。</li>
            </ul>
          </li>
        </ol>

        <h2>第二階段問卷 (活動期間：X月X日 至 X月X日)</h2>
        <ol>
          <li>
            <strong>參加資格：</strong>
            <ul>
              <li>本活動僅限年滿20歲的通路夥伴參加。一個員工ID僅能參加一次。</li>
            </ul>
          </li>
          <li>
            <strong>抽獎機制 & 獎品類型：</strong>
            <ul>
              <li>菲利普莫里斯將於第二階段問卷結束後，針對活動期間完成第二階段問卷的所有年滿20歲的通路夥伴進行抽獎 (抽獎日為X月X日)，將抽出價值新台幣300元一卡通的獎項50名，一個員工ID中獎僅限一次。</li>
              <li>因為本活動為機率中獎制，若抽獎結束後仍有剩餘獎項，將不進行補抽。</li>
            </ul>
          </li>
          <li>
            <strong>得獎者名單公布：</strong>
            <ul>
              <li>得獎者名單預計將於抽獎隔天下午三點於神隊友公告。</li>
            </ul>
          </li>
          <li>
            <strong>獎品發放方式：</strong>
            <ul>
              <li>菲利普莫里斯專員將到店舖發放獎勵給得獎者簽收。</li>
              <li>針對宜花東、外島或處於管制出入區域的店舖等，菲利普莫里斯將寄送簽收單並附上已包含郵資與回寄之資訊的信封到得獎者所在店舖，得獎者需於指定日期內回填後並寄到指定地址，待菲利普莫里斯確認報稅資訊正確之後，將以雙掛號寄發新台幣300元一卡通至店舖給予得獎者。</li>
            </ul>
          </li>
        </ol>

        <h2>得獎者所得稅申報說明</h2>
        <ul>
          <li>參與者可於15天活動內多次得獎，但每日中獎僅限一次。依中華民國稅法規定，得獎者若為中華民國境內居住之個人，機會中獎累計獎項超過價值新台幣1,000元，需依規定填寫相關資料並繳交身分證正反面影本供報稅使用，並列入本年度之個人綜合所得稅申報 ; 得獎者若非為中華民國境內居住之個人，依法須預繳20%機會中獎稅金才可兌換獎項 ; 若得獎者無法或不願配合相關流程，視同得獎者自願放棄中獎資格，獎項將不另行補發，本活動不會再進行候補得獎者抽選。</li>
        </ul>

        <h2>活動權利</h2>
        <ul>
          <li>菲利普莫里斯保留隨時修改、變更、取消或暫停活動的權利。</li>
          <li>參加活動及獲獎資格需為年滿20歲的通路夥伴，若經審核未符、中獎者有仿冒或偽造之情事，除取消獎金發放之外，應自負其法律上責任。</li>
          <li>本活動所有獎勵不提供折現，變更其他贈品，亦不得轉讓予其他人領獎，惟若不可抗力因素導致獎項無法提供時，菲利普莫里斯保留更換等值贈品之權利。</li>
        </ul>
      </div>
    </div>
  </div>
  <script>
    function showTabContent(tabId) {
      var tabs = document.querySelectorAll('.tab');
      var contents = document.querySelectorAll('.tab-content');

      tabs.forEach(tab => tab.classList.remove('active'));
      contents.forEach(content => content.classList.remove('active'));

      document.getElementById(tabId).classList.add('active');
      document.querySelector(`.tab[onclick="showTabContent('${tabId}')"]`).classList.add('active');
    }
   
    async function fetchAllPrizes() {
      try {
        const response = await fetch('/prizes/all'); // 調用後端 API
        const data = await response.json();
  
        if (response.ok) {
          // 動態生成 HTML 內容
          const resultsContainer = document.getElementById('winner-list');
          const prizesByDate = data.prizesByDate;
  
          resultsContainer.innerHTML = Object.keys(prizesByDate).map(date => `
            <div>
              <h3>${date} 加碼抽$300 共 ${prizesByDate[date].length} 名</h3>
              <ul>
                ${prizesByDate[date].map(winner => `
                  <li>${winner.UserName} - ${winner.PhoneNumber}</li>
                `).join('')}
              </ul>
            </div>
            <hr>
          `).join('');
        } else {
          document.getElementById('winner-list').innerHTML = `<p>${data.message}</p>`;
        }
      } catch (error) {
        console.error('Error fetching prizes:', error);
        document.getElementById('winner-list').innerHTML = '<p>加載失敗，請稍後重試。</p>';
      }
    }
   // 初始展示第一個tab
   document.addEventListener('DOMContentLoaded', function () {
    showTabContent('winner-list');
  });
    // 初次調用 API 加載得獎公告
    fetchAllPrizes();
  
  </script>
</body>

</html>