<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>活動條款得獎公告</title>
  <link rel="stylesheet" href="/stylesheets/prize-info.css">
  <script src="/scripts/common.js"></script>
</head>

<body>
  <div class="container">
    <div class="tabs">
      <div id="winner-list-tab" class="tab active" onclick="showTabContent('winner-list')">得獎公告</div>
      <div id="important-info-tab" class="tab" onclick="showTabContent('important-info')">活動條款</div>
    </div>


    <div id="winner-list" class="tab-content active">
      <h2>得獎公告</h2>
      <!-- 得獎資料將通過 JavaScript 動態插入 -->
      <p>正在加載得獎名單...</p>

    </div>
    <div id="important-info" class="tab-content">
  <div id="important-info-conent">
    <h2>達成任務賺獎勵金 + 全勤加碼獎勵金</h2>
    <ol>
      <li>
        <strong>參加資格：</strong>
        <ul>
          <li>本活動僅限通路夥伴參加。一個員工ID僅能參加一次。</li>
        </ul>
      </li>
      <li>
        <strong>獎勵機制 & 獎品類型：</strong>
        <ul>
          <li>活動期間自 10月29日起至12月2日，為期五週。每週於週三與週六開啟新任務，共計 10個任務週期。</li>
          <li>參與者於活動期間登入「神隊友」平台並完成當期任務，可獲得 NTD 5 LINE POINT 好禮即享券。</li>
          <li>若參與者於活動期間連續10次登入並完成所有任務（即每週三與週六各一次，共10次），可額外獲得 NTD 50 LINE POINT 好禮即享券。</li>
          <li>完成全部10次任務者，最高可獲得總計 NTD 100 LINE POINT（包含每次任務獎勵NTD 5 × 10次 + 連續完成獎勵NTD 50）。</li>
          <li>活動獎勵將以電子券形式發送，並依Edenred平台通知時間發放。逾期未完成任務者，將不具獲獎資格。每項任務獎勵僅限於當期有效，若未於任務開啟期間完成，將無法獲得該次獎勵。</li>
        </ul>
      </li>
      <li>
        <strong>獎勵發放方式：</strong>
        <ul>
          <li>菲利普莫里斯將透過Edenred系統進行發放，發放的LINE POINT好禮即享券，兌換期間為自發行日起算至3個月底。</li>
          <li>兌換後的LINE POINTS有效期限為最後一次獲得點數當天起算180天內，一旦超過有效期限，您所持有的點數將會全數失效，逾期失效不予補償。</li>
        </ul>
      </li>
    </ol>

    <h2>指定任務限定加碼抽獎</h2>
    <ol>
      <li>
        <strong>抽獎資格：</strong>
        <ul>
          <li>本活動僅限通路夥伴參加。一個員工ID在每個指定日期僅能參加一次。</li>
        </ul>
      </li>
      <li>
        <strong>抽獎機制 & 獎品類型：</strong>
        <ul>
          <li>系統將於特定任務6、8、10期間加碼抽獎，完成該期任務的通路夥伴可進行價值NTD 300禮物卡的獎項抽獎。</li>
          <li>獎項共計300名，每人每日中獎僅限一次，三次抽獎共計抽出最多900名得獎名額。</li>
        </ul>
      </li>
      <li>
        <strong>得獎者名單公布：</strong>
        <ul>
          <li>得獎者名單預計將於下個活動啟動日的隔日下午三點於神隊友公告。</li>
        </ul>
      </li>
      <li>
        <strong>獎品發放方式：</strong>
        <ul>
          <li>菲利普莫里斯專員將到店舖發放獎勵給得獎者簽收。</li>
          <li>針對宜花東、外島或處於管制出入區域的店舖等，菲利普莫里斯將寄送簽收單並附上已包含郵資與回寄之資訊的信封到得獎者所在店舖。</li>
          <li>得獎者需於2月1日(含)之前回填後並寄到指定地址(郵戳為憑)，待菲利普莫里斯確認報稅資訊正確之後，將以雙掛號寄發價值新台幣300元禮物卡至店舖給予得獎者。</li>
        </ul>
      </li>
    </ol>

    <h2>得獎者所得稅申報說明</h2>
    <ul>
      <li>參與者可於活動內多次得獎，但每個任務中獎僅限一次。</li>
      <li>依中華民國稅法規定，機會中獎累計獎項超過價值NTD1,000，需依規定填寫相關資料並繳交身分證正反面影本供報稅使用，並將以新台幣計價列入本年度之個人綜合所得稅申報。</li>
      <li>得獎者若為海外人士或不具中華民國身分者，依法需預繳20%機會中獎稅金才可兌換獎項。</li>
      <li>若得獎者無法或不願配合報稅流程，或未在2月1日(含)之前寄出有完整訊息的簽收單 (郵戳為憑)，視同得獎者自願放棄中獎資格，獎項將不另行補發，本活動不會再進行候補中獎者抽選。</li>
    </ul>

    <h2>活動權利</h2>
    <ul>
      <li>菲利普莫里斯保留隨時修改、變更、取消或暫停活動的權利。</li>
      <li>參加活動及獲獎資格需為通路夥伴，若經審核未符、中獎者有仿冒或偽造之情事，除取消獎金發放之外，應自負其法律上責任。</li>
      <li>本活動所有獎勵不提供折現、變更其他贈品，亦不得轉讓予其他人領獎，惟若不可抗力因素導致獎項無法提供時，菲利普莫里斯保留更換等值贈品之權利。</li>
    </ul>
  </div>
</div>
  </div>
  <script>
    function showTabContent(tabId) {
      var tabs = document.querySelectorAll('.tab');
      var contents = document.querySelectorAll('.tab-content');

      tabs.forEach(tab => tab.classList.remove('active'));
      contents.forEach(content => content.classList.remove('active'));

      document.getElementById(tabId).classList.add('active');
      document.querySelector(`.tab[onclick="showTabContent('${tabId}')"]`).classList.add('active');
    }

    async function fetchAllPrizes() {
      try {
        const response = await fetch('/prizes/all');
        const data = await response.json();

        const resultsContainer = document.getElementById('winner-list');

        if (response.ok && data.prizesByTask && Object.keys(data.prizesByTask).length > 0) {
          const prizesByTask = data.prizesByTask;

          resultsContainer.innerHTML = Object.keys(prizesByTask).map(taskName => `
      <div class="task-prize-group">
        <h3>${taskName} 馬上抽$300 共 ${prizesByTask[taskName].length} 名</h3>
        <ul>
          ${prizesByTask[taskName].map(winner => `
            <li>${winner.AccountName}  ${winner.UserName}</li>
          `).join('')}
        </ul>
      </div>
      <hr>
    `).join('');
        } else {
          resultsContainer.innerHTML = `<p>${data.message || '目前無人獲獎。'}</p>`;
        }
      } catch (error) {
        console.error('Error fetching prizes:', error);
        document.getElementById('winner-list').innerHTML = '<p>加載失敗，請稍後重試。</p>';
      }
    }
    // 初始展示第一個tab
    document.addEventListener('DOMContentLoaded', function () {
      showTabContent('important-info');
    });
    // 初次調用 API 加載得獎公告
    fetchAllPrizes();

  </script>
</body>

</html>